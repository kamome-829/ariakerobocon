# stm32へmicropythonでのプログラム書き込み

- stm32へマイクロパイソンのプログラムを書き込むには内部ファイルシステムを使用する必要がある。下記参考リンク
[マイクロパイソン内部ファイルシステム](https://micropython-docs-ja.readthedocs.io/ja/latest/esp8266/tutorial/filesystem.html)

- 手順
- まずは新規にファイルを作成するファイルを作成するには次のようにする。

>>>f = open('data.txt', 'w')

>>>f.write('some data')

9

>>>f.close()

- “9”は書き込まれたバイト数。このコマンドを使用してプログラムを書き込む。
そのため('some data')の部分に書いたプログラムを入れる必要がある。しかし直接プログラムを入れてもmicropythonは理解できないので工夫する必要がある。

- プログラム書き込み方法としてエディタの置換機能を使用する。（エディタは正規表現が使用できれば大丈夫）

- まずプログラムを書く。プログラムが書き終わったら、エディタの置換を開き正規表現を使用するにチェックを入れる。

- その後変換前の文字列に「\n」をいれ変換後の文字列に「\\n」をいれすべて置換する。そうすることで、メタ文字をエスケープする（直後の文字を正規表現の記号(メタ文字）として扱わないことを指定）ため改行が消え、すべて一行になる。

- 次に

>>>f.write('')

は400文字（もしかしたら200文字かも）までしか一度に書き込めないので400文字以内で改行をする。

- 最後に、もう一度置換を行う。変換前の文字列に「\n」、変換後の文字列に「')f.write('」を入れすべて変換を行う。そしてプログラムコードの先頭に「f.write('」、最後に「')」を書き込む。

- これで変換は完了。あとはコピー＆ペーストでプログラムを書き込み終了。

- わかりずらいと思うので、もし分からなかったら連絡ください（笑）あと、この方法しか書き込み方法知らないので、これじゃない書き込み方法があるなら、教えてほしいです。（笑）
