# このプログラムの全体設計

- すべてマイクロパイソンで記述している。
- このプログラムはマイクロビット2台、STM32f4 1台、計3台が使用されています。
- 主な役割として
- マイクロビット1（controller.py）→コントローラー（リモコン）として使用
- マイクロビット2（connect.py）→マイクロビット1とSTMの通信用として使用。通信方法はシリアル通信（UART）を使用している。
- STM32（car_2.py）→マイクロビット2から来たデータを適切な形になおし、motorドライバへ信号を送る。
- 

- マイコン間（各ルーチン間）のデータのやり取りについて 
- マイコン間では2バイトのデータで通信を行っている。
- データ設計として1バイト目に足回りが動く状態のデータが送信され2バイト目にスピードのデータが送信される。
- このデータのビットの役割の割り振りは徳永＿卒論「4章2節」に詳しく記載。また、設計方法が詳しく知りたいなら卒論「2章・4章」に記載されているめ卒論に一度目を通してプログラムを見ることをオススメする。
- シリアル通信でやり取りされるデータはやり取りの方法は様々あるが、中身はすべてバイト単位でのやり取りを行っているのでビット操作に慣れておくことをオススメする。じゃないと応用できない。つまりサンプルしか動かせない→今の有明

- データのビット振り分け
- 1ビット目（状態）
- 最上位ビットなし、PCのキーボード（アスキーコードのため）で簡単に動作確認できるようにするためなしに設定している。
- 上位2ビット目（7ビット目）停止か動作か 0→停止、1→動作
- 6＆5ビット目 動作モードの指示00→前後、01→左右、10→斜め、11→旋回
- 4ビット目 前後の指示0→前、1→後
- 3ビット目 左右の指示0→右、1→左
- 下位2ビット 曲がる度合いの指示（どのくらい曲がりながら進むか）00→なし、01→小カーブ、10→中カーブ、11→大カーブ
- 
- 2ビット目（スピード）
- 8ビットすべてでスピードを指示。つまり、255段階のスピードが用意されている。

- 
- 詳しい設計方法は5E中村が知っている（経験あり） 

- 最後にアドバイス電気のI先生はもうあんまりやる気ないみたいだから機械のH先生へ助言を求めるのだ！情報化はわからないけど詳しい先生いたらほんとにいろいろ教わったがいいと思う。